<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Locate duplicated information within a data.frame — find_duplicates • revtools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Locate duplicated information within a data.frame — find_duplicates"><meta property="og:description" content="Identify potential duplicates within a data.frame."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">revtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mjwestgate/revtools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Locate duplicated information within a data.frame</h1>
    
    <div class="hidden name"><code>find_duplicates.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Identify potential duplicates within a <code>data.frame</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">find_duplicates</span><span class="op">(</span><span class="va">data</span>, <span class="va">match_variable</span>, <span class="va">group_variables</span>,</span>
<span>  <span class="va">match_function</span>, <span class="va">method</span>, <span class="va">threshold</span>,</span>
<span>  to_lower <span class="op">=</span> <span class="cn">FALSE</span>, remove_punctuation <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>a <code>data.frame</code> containing data to be matched</p></dd>

  <dt>match_variable</dt>
<dd><p>a length-1 integer or string listing the column in which duplicates should be sought. Defaults to doi where available, followed by title. If neither are found the function will fail.</p></dd>

  <dt>group_variables</dt>
<dd><p>an optional vector listing the columns to use as grouping variables; that is, categories withing which duplicates should be sought (see 'note'). Optionally NULL to compare all entries against one another.</p></dd>

  <dt>match_function</dt>
<dd><p>a function to calculate dissimilarity between strings. Defaults to "exact" if doi's are available or "stringdist" otherwise.</p></dd>

  <dt>method</dt>
<dd><p>the required 'method' option that corresponds with <code>match_function</code>. Defaults to NULL if <code>match_function</code> is "exact", "osa" for match_function == "stringdist", or "fuzz_m_ratio" for match_function == "fuzzdist".</p></dd>

  <dt>threshold</dt>
<dd><p>an upper limit above which similar articles are not recognized as duplicates. Defaults to 5 for stringdist and 0.1 for fuzzdist. Ignored if <code>match_function</code> == "exact".</p></dd>

  <dt>to_lower</dt>
<dd><p>logical: should text be made lower case prior to searching? Defaults to FALSE.</p></dd>

  <dt>remove_punctuation</dt>
<dd><p>logical: should punctuation be removed prior to searching? Defaults to FALSE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>an integer vector, in which entries with the same integer have been selected as duplicates by the selected algorithm.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p><code>find_duplicates</code> runs a <code>while</code> loop. It starts by checking the first entry of <code>data</code> against every other entry for potential duplicates. If any matches are found, those entries are excluded from consideration. The loop then continues until all entries have been checked. In order to work, this function requires the <code>data</code> and <code>match_variable</code> arguments be specified. The remaining arguments affects how duplicates are identified, and can also strongly influence the speed of the outcome.</p>
<p>The argument <code>group_variables</code> specifies variables that contain supplementary information that can reduce the number of entries that need to be searched. For example, you might want to only match article titles if they occur within the same journal, or in the same year. The more variables you specify, the fewer pairs of matches that have to be tested to locate duplicates, greatly increasing the speed of the algorithm. Conversely, if no variables are specified, then each entry is checked against every other entry that has yet to be excluded from the dataset. This is fine for small datasets, but massively increases computation time for large datasets.</p>
<p>Missing values are handled differently. Entries that are <code>NA</code> for <code>match_variable</code> are always labelled as unique values, and are not checked for duplicates against the rest of the dataset. However, entries of <code>group_variables</code> that are <code>NA</code> are included in every comparison.</p>
<p><code>find_duplicates</code> contains three 'built-in' methods for string matching. "stringdist" calls the function of the same name from the package <code>stringdist</code>; ditto for "fuzzdist" which is in <code>revtools</code>, but based on the Python library <code>fuzzywuzzy</code>. "exact" simply searches for exact matches. In principle you could call any function for string matching, so long as it accepts the arguments <code>a</code>, <code>b</code> and <code>method</code> (see documentation on stringdist for details), and returns a measure of distance (i.e. not similarity).</p>
<p>Finally, <code>to_lower</code> and <code>remove_punctuation</code> specify whether to transform the text prior to searching for duplicates.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="screen_duplicates.html">screen_duplicates</a></code> and <code><a href="extract_unique_references.html">extract_unique_references</a></code> for manual and automated screening (respectively) of results from this function.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># import data</span></span></span>
<span class="r-in"><span><span class="va">file_location</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"extdata"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"avian_ecology_bibliography.ris"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"revtools"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_bibliograpy.html">read_bibliography</a></span><span class="op">(</span><span class="va">file_location</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># generate then locate some 'fake' duplicates</span></span></span>
<span class="r-in"><span><span class="va">x_duplicated</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x_check</span> <span class="op">&lt;-</span> <span class="fu">find_duplicates</span><span class="op">(</span><span class="va">x_duplicated</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># returns a vector of potential matches</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martin J. Westgate.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

